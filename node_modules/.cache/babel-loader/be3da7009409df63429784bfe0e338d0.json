{"ast":null,"code":"import _defineProperty from\"C:/Users/14382/Desktop/DECInfodeGestion/S5/PROGRAMMATION AVEC FRAMEWORK C\\xD4T\\xC9 CLIENT/ReactEscapeRoom_SoufianeJD/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/14382/Desktop/DECInfodeGestion/S5/PROGRAMMATION AVEC FRAMEWORK C\\xD4T\\xC9 CLIENT/ReactEscapeRoom_SoufianeJD/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/14382/Desktop/DECInfodeGestion/S5/PROGRAMMATION AVEC FRAMEWORK C\\xD4T\\xC9 CLIENT/ReactEscapeRoom_SoufianeJD/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import'./Dashboard.css';import Input from'../Button/Input';import Button from'../Button/ButtonWithSpinner';import ErrMsg from'../Msgs/ErrMsg';import{useSelector,useDispatch}from'react-redux';import{changePasswordStart,signOutStart}from'../redux/actions/userActions';import{selectCurrentUser,selectIsLoading,selectErrMsg}from'../redux/selectors/userSelector';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Dashboard(props){var dispatch=useDispatch();var currentUser=useSelector(function(state){return selectCurrentUser(state);});var username=currentUser.username;var isLoading=useSelector(function(state){return selectIsLoading(state);});var errMsgRes=useSelector(function(state){return selectErrMsg(state);});var _useState=useState({oldPassword:'',newPassword:''}),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var oldPassword=input.oldPassword,newPassword=input.newPassword;var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),errMsg=_useState4[0],setErrMsg=_useState4[1];useEffect(function(){setErrMsg(errMsgRes);},[errMsgRes]);useEffect(function(){document.title=\"Dashboard \".concat(username);});var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setErrMsg('');setInput(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,value));});};var handleChangePassword=function handleChangePassword(e){if(!(oldPassword&&newPassword)){setErrMsg('Please fill all input form.');}else if(oldPassword===newPassword){setErrMsg('The new password is still the same as old password.');}else{setErrMsg('');dispatch(changePasswordStart({user:currentUser,oldPassword:oldPassword,newPassword:newPassword}));}};var handleLogout=function handleLogout(){dispatch(signOutStart());};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Hello \",username]}),/*#__PURE__*/_jsxs(\"div\",{className:\"change-pass-form\",children:[/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"oldPassword\",placeholder:\"Old Password\",value:oldPassword,onChange:handleChange}),/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"newPassword\",placeholder:\"New Password\",value:newPassword,onChange:handleChange}),errMsg?/*#__PURE__*/_jsx(ErrMsg,{text:errMsg}):'',/*#__PURE__*/_jsx(Button,{handleClick:handleChangePassword,isLoading:isLoading,label:\"Change Password\"}),/*#__PURE__*/_jsx(Button,{handleClick:handleLogout,label:\"Logout\"})]})]});}export default Dashboard;","map":{"version":3,"sources":["C:/Users/14382/Desktop/DECInfodeGestion/S5/PROGRAMMATION AVEC FRAMEWORK CÔTÉ CLIENT/ReactEscapeRoom_SoufianeJD/frontend/src/components/Dashboard/Dashboard.js"],"names":["useEffect","useState","Input","Button","ErrMsg","useSelector","useDispatch","changePasswordStart","signOutStart","selectCurrentUser","selectIsLoading","selectErrMsg","Dashboard","props","dispatch","currentUser","state","username","isLoading","errMsgRes","oldPassword","newPassword","input","setInput","errMsg","setErrMsg","document","title","handleChange","e","target","name","value","prev","handleChangePassword","user","handleLogout"],"mappings":"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","sourcesContent":["import {useEffect, useState} from 'react';\nimport './Dashboard.css';\n\nimport Input from '../Button/Input';\nimport Button from '../Button/ButtonWithSpinner';\nimport ErrMsg from '../Msgs/ErrMsg';\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { changePasswordStart, signOutStart } from '../redux/actions/userActions';\n\nimport { selectCurrentUser, selectIsLoading, selectErrMsg } from '../redux/selectors/userSelector';\n\nfunction Dashboard(props) {\n\tconst dispatch = useDispatch();\n\n\tconst currentUser = useSelector(state => selectCurrentUser(state));\n\tconst { username } = currentUser;\n\n\tconst isLoading = useSelector(state => selectIsLoading(state));\n\tlet errMsgRes = useSelector(state => selectErrMsg(state))\n\n\tconst [input, setInput] = useState({ oldPassword: '', newPassword: '' });\n\tconst { oldPassword, newPassword } = input;\n\tconst [errMsg, setErrMsg] = useState('');\n\n\tuseEffect(() => {\n\t\tsetErrMsg(errMsgRes)\n\t}, [errMsgRes])\n\n\tuseEffect(() => {\n\t\tdocument.title = `Dashboard ${username}`;\n\t})\n\n\tconst handleChange = e => {\n\t\tconst { name, value } = e.target;\n\t\tsetErrMsg('');\n\n\t\tsetInput(prev => {\n\t\t\treturn {\n\t\t\t\t...prev,\n\t\t\t\t[name]: value\n\t\t\t}\n\t\t})\n\t}\n\n\tconst handleChangePassword = e => {\n\t\tif (!(oldPassword && newPassword)) {\n\t\t\tsetErrMsg('Please fill all input form.')\n\t\t} else if (oldPassword === newPassword) {\n\t\t\tsetErrMsg('The new password is still the same as old password.')\n\t\t} else {\n\t\t\tsetErrMsg('');\n\t\t\tdispatch(changePasswordStart({ user: currentUser, oldPassword, newPassword }));\n\t\t}\n\t}\n\n\tconst handleLogout = () => {\n\t\tdispatch(signOutStart());\n\t}\n\n\treturn (\n\t\t<div className=\"dashboard\">\n\t\t\t<h1>Hello {username}</h1>\n\t\t\t<div className='change-pass-form'>\n\t\t\t\t<Input type='password' name='oldPassword' placeholder='Old Password' value={oldPassword} onChange={handleChange} />\n\t\t\t\t<Input type='password' name='newPassword' placeholder='New Password' value={newPassword} onChange={handleChange} />\n\t\t\t\t{\n\t\t\t\t\terrMsg ? <ErrMsg text={errMsg} /> : ''\n\t\t\t\t}\n\t\t\t\t<Button handleClick={handleChangePassword} isLoading={isLoading} label='Change Password' />\n\t\t\t\t<Button handleClick={handleLogout} label='Logout' />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}